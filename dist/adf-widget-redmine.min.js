!function(e,s){"use strict";angular.module("adf.widget.redmine",["adf.provider","smart-table"]).constant("redmineEndpoint","http://www.redmine.org/").config(["dashboardProvider",function(e){var s={templateUrl:"{widgetsPath}/redmine/src/issues/edit/edit.html",controller:"editController",controllerAs:"vm",resolve:{projects:["redmineService",function(e){return e.getProjects()}]}};e.widget("redmineIssues",{title:"Redmine Issues",description:"Show Issues of an given Redmine Instance.",templateUrl:"{widgetsPath}/redmine/src/issues/view.html",controller:"IssueController",controllerAs:"vm",resolve:{issues:["redmineService","config",function(e,s){return e.getIssues(s)}]},edit:s})}]),angular.module("adf.widget.redmine").run(["$templateCache",function(e){e.put("{widgetsPath}/redmine/src/issues/view.html",'<table st-table=rowCollection class="table table-striped"><thead><tr><th ng-if=vm.config.columns.id.show>ID</th><th ng-if=vm.config.columns.tracker.show>Tracker</th><th ng-if=vm.config.columns.status.show>Status</th><th ng-if=vm.config.columns.subject.show>Subject</th></tr></thead><tbody><tr ng-repeat="issue in vm.issues"><td ng-if=vm.config.columns.id.show><a href=\'{{"http://www.redmine.org/issues/"+issue.id}}\'>{{issue.id}}</a></td><td ng-if=vm.config.columns.tracker.show>{{issue.tracker.name}}</td><td ng-if=vm.config.columns.status.show>{{issue.status.name}}</td><td ng-if=vm.config.columns.subject.show>{{issue.subject}}</td></tr></tbody></table>'),e.put("{widgetsPath}/redmine/src/issues/edit/edit.html",'<form role=form><div class=form-group><label for=project>Project</label><select name=project id=project class=form-control ng-model=config.project><option>All</option><option ng-repeat="project in vm.projects | orderBy: \'name\'" value={{project.id}}>{{project.name}}</option></select></div><div class=form-group><label for=assgined_to_id>Assigned To</label> <span class="glyphicon glyphicon-info-sign" uib-tooltip="Get issues which are assigned to the given user ID. <me> can be used instead an ID to fetch all issues from the logged in user. Leave empty if you want to see all issues."></span> <input name=assigned_to_id id=assgined_to_id class=form-control ng-model=config.assigned_to_id></div><div class=form-group><input type=checkbox name=showClosed ng-model=config.showClosed> Show closed issues</div><div class=form-group><label for=project>Columns to show:</label><li class=list-group-item ng-repeat="(key, entry) in vm.possibleColumns"><input type=checkbox name={{key}} ng-model=config.columns[key].show> {{entry.name}}</li></div></form>')}]),angular.module("adf.widget.redmine").controller("editController",["projects","config",function(e,s){var t=this;t.possibleColumns={id:{name:"ID",show:!0},tracker:{name:"Tracker",show:!0},status:{name:"Status",show:!0},subject:{name:"Subject",show:!0}},angular.equals({},s)&&(s.columns=t.possibleColumns,s.project="",s.assigned_to_id="me",s.showClosed=!1),t.projects=e}]),angular.module("adf.widget.redmine").controller("IssueController",["issues","config",function(e,s){var t=this;t.config=s,t.issues=e.issues}]),angular.module("adf.widget.redmine").factory("redmineService",["$http","redmineEndpoint",function(e,s){function t(e){return e.data}function o(o){return e.get(s+o).then(t)}function n(e){var s=i(e);return o("issues.json"+s)}function i(e){var s="?";return e.project&&(s+="&project_id="+e.project),e.assigned_to_id&&(s+="&assigned_to_id="+e.assigned_to_id),e.showClosed&&(s+="&status_id=*"),s}function r(){return o("projects.json").then(function(e){return e.projects})}return{getIssues:n,getProjects:r}}])}(window);